# 动销判定逻辑深度分析报告

## 核心问题
**"高动销"和"低动销"是如何判定的？**

---

## 一、动销的定义

### 1.1 动销指数的计算（V7.1）

```python
动销指数 = 标准化销量×60% + 标准化订单数×40%

# 标准化公式
标准化值 = (实际值 - 最小值) / (最大值 - 最小值)

# 结果：0-1之间的数字，越接近1说明越畅销
```

### 1.2 高动销 vs 低动销的判定

**核心判定标准**：
```python
# 动销指数阈值：全店中位数
sales_threshold = product_data['动销指数'].median()

# 高动销判定
high_sales = sales_index > sales_threshold

# 低动销判定
low_sales = sales_index <= sales_threshold
```

**含义**：
- **高动销**：动销指数 > 全店中位数（排名前50%）
- **低动销**：动销指数 ≤ 全店中位数（排名后50%）

---

## 二、六象限中的动销判定

### 2.1 明星商品（🌟）

**判定条件**：
```python
high_profit = profit_rate > profit_threshold  # 高利润
high_sales = sales_index > sales_threshold    # 高动销 ✅
high_value = (unit_profit >= 0.5 or total_profit >= 50)  # 高价值

if high_profit and high_sales and high_value:
    return '🌟 明星商品'
```

**动销要求**：
- ✅ 动销指数 > 全店中位数
- ✅ 排名前50%

---

### 2.2 潜力商品（💎）

**判定条件**：
```python
high_profit = profit_rate > profit_threshold  # 高利润
high_sales = sales_index > sales_threshold    # 高动销
low_sales = not high_sales                    # 低动销 ✅

if high_profit and low_sales:
    return '💎 潜力商品'
```

**动销要求**：
- ✅ 动销指数 ≤ 全店中位数
- ✅ 排名后50%

---

### 2.3 自然引流（⚡）

**判定条件**：
```python
low_profit = not high_profit                  # 低利润
high_sales = sales_index > sales_threshold    # 高动销 ✅

if low_profit and high_sales:
    # 额外要求：必须有足够的销量和订单数
    if sales_qty >= 20 and order_count >= 5:
        return '⚡ 自然引流'
```

**动销要求**：
- ✅ 动销指数 > 全店中位数
- ✅ 排名前50%
- ✅ **额外要求**：销量≥20件 且 订单≥5单

**为什么有额外要求？**
- 防止"低销量但动销指数虚高"的情况
- 例如：销量10件，订单8单，动销指数可能很高，但实际销量太少

---

### 2.4 低效商品（🐌）

**判定条件**：
```python
# 不符合以上任何象限的商品
return '🐌 低效商品'
```

**典型情况**：
1. **低利润 + 低动销**：最常见的低效商品
2. **低利润 + 高动销但销量不足20件**：动销指数高但实际销量太少
3. **高利润 + 低动销但不满足明星/潜力条件**：边缘情况

---

## 三、问题分析

### 🔴 问题1：低效商品的判定逻辑不够清晰

**当前逻辑**：
```python
# 低效商品 = 其他所有情况
return '🐌 低效商品'
```

**问题场景**：

#### 场景1：低利润 + 高动销 + 销量不足
```
商品A：
- 利润率：10%（低于品类中位数15%）→ 低利润
- 动销指数：0.65（高于全店中位数0.5）→ 高动销
- 销量：15件（< 20件）
- 订单数：8单（≥ 5单）

判定流程：
1. 不是策略引流 ❌
2. 不是明星商品 ❌（低利润）
3. 不是畅销商品 ❌（销量不足70分位数）
4. 不是潜力商品 ❌（高动销）
5. 不是自然引流 ❌（销量 < 20件）
6. → 判定为"低效商品" ✅

问题：
- 这个商品动销指数0.65，排名前50%，算"高动销"
- 但因为销量不足20件，被判定为"低效商品"
- 这合理吗？
```

#### 场景2：低利润 + 高动销 + 订单数不足
```
商品B：
- 利润率：10%（低于品类中位数15%）→ 低利润
- 动销指数：0.68（高于全店中位数0.5）→ 高动销
- 销量：25件（≥ 20件）
- 订单数：3单（< 5单）

判定流程：
1. 不是策略引流 ❌
2. 不是明星商品 ❌（低利润）
3. 不是畅销商品 ❌（销量不足70分位数）
4. 不是潜力商品 ❌（高动销）
5. 不是自然引流 ❌（订单数 < 5单）
6. → 判定为"低效商品" ✅

问题：
- 这个商品动销指数0.68，排名前50%，算"高动销"
- 但因为订单数不足5单，被判定为"低效商品"
- 这合理吗？可能是团购商品
```

---

### 🔴 问题2：动销判定的双重标准

**标准1：动销指数中位数**
```python
high_sales = sales_index > sales_threshold  # 全店中位数
```

**标准2：绝对门槛（20件+5单）**
```python
if sales_qty >= 20 and order_count >= 5:
    return '⚡ 自然引流'
```

**问题**：
- 两个标准可能冲突
- 动销指数高，但销量/订单数不足 → 被判定为"低效商品"
- 这导致"低效商品"中混入了一些"高动销但销量少"的商品

---

## 四、逻辑评估

### 4.1 当前逻辑的优点

✅ **优点1：防止低销量虚高**
```
商品：销量10件，订单8单
→ 动销指数可能很高（因为订单数占比高）
→ 但实际销量太少，不应该算"高动销"
→ 20件+5单的门槛能有效过滤
```

✅ **优点2：防止团购误判**
```
商品：销量30件，订单2单
→ 动销指数可能中等
→ 但订单数太少，可能是团购
→ 5单的门槛能有效过滤
```

### 4.2 当前逻辑的问题

❌ **问题1：低效商品定义模糊**
```
低效商品 = 其他所有情况

包含：
1. 低利润 + 低动销（真正的低效）✅
2. 低利润 + 高动销但销量不足（边缘情况）⚠️
3. 高利润 + 低动销但价值不足（边缘情况）⚠️
```

❌ **问题2：动销判定不一致**
```
明星商品：只看动销指数 > 中位数
潜力商品：只看动销指数 ≤ 中位数
自然引流：动销指数 > 中位数 + 销量≥20 + 订单≥5
低效商品：其他情况

→ 自然引流有额外要求，其他象限没有
→ 导致一些"高动销但销量少"的商品被判定为"低效"
```

---

## 五、优化建议

### 方案1：统一动销判定标准（推荐）

**思路**：所有象限都使用相同的动销判定标准

**修改建议**：
```python
# 定义高动销的统一标准
def is_high_sales(sales_index, sales_qty, order_count, sales_threshold):
    """
    高动销判定（统一标准）
    1. 动销指数 > 全店中位数
    2. 销量 ≥ 20件（防止低销量虚高）
    3. 订单数 ≥ 5单（防止团购误判）
    """
    return (sales_index > sales_threshold and 
            sales_qty >= 20 and 
            order_count >= 5)

# 应用到所有象限
high_sales = is_high_sales(sales_index, sales_qty, order_count, sales_threshold)
low_sales = not high_sales

# 明星商品
if high_profit and high_sales and high_value:
    return '🌟 明星商品'

# 潜力商品
if high_profit and low_sales:
    return '💎 潜力商品'

# 自然引流
if low_profit and high_sales:
    return '⚡ 自然引流'

# 低效商品（明确定义）
if low_profit and low_sales:
    return '🐌 低效商品'
```

**优点**：
- ✅ 逻辑一致，所有象限使用相同标准
- ✅ 低效商品定义明确：低利润 + 低动销
- ✅ 避免"高动销但销量少"的商品被误判为低效

**缺点**：
- ⚠️ 明星商品的门槛提高了（需要销量≥20件）
- ⚠️ 可能导致一些"高利润+高动销指数但销量少"的商品被判定为潜力商品

---

### 方案2：保留当前逻辑，但明确低效商品的定义（次优）

**思路**：保持当前逻辑，但在操作指南中明确说明

**修改建议**：
```
低效商品的定义：
1. 低利润 + 低动销（最常见）
2. 低利润 + 高动销但销量不足20件或订单不足5单（边缘情况）
3. 其他不符合任何象限的商品

说明：
- 如果商品动销指数高，但销量不足20件或订单不足5单，
  说明虽然相对排名靠前，但绝对销量太少，仍需要优化
```

**优点**：
- ✅ 不需要修改代码
- ✅ 通过说明让用户理解逻辑

**缺点**：
- ⚠️ 逻辑仍然不够清晰
- ⚠️ 用户可能困惑："为什么高动销的商品被判定为低效？"

---

### 方案3：增加新象限"待观察"（复杂）

**思路**：增加一个新象限，专门放置"高动销但销量少"的商品

**修改建议**：
```python
# 七象限分类
1. 🎯 策略引流
2. 🌟 明星商品
3. 🔥 畅销商品
4. 💎 潜力商品
5. ⚡ 自然引流
6. 👀 待观察（新增）：高动销但销量不足20件或订单不足5单
7. 🐌 低效商品：低利润 + 低动销
```

**优点**：
- ✅ 逻辑最清晰
- ✅ 每个象限定义明确

**缺点**：
- ⚠️ 增加了复杂度
- ⚠️ 需要大量修改代码和操作指南

---

## 六、推荐方案

### 推荐：方案1（统一动销判定标准）

**理由**：
1. ✅ 逻辑一致性最好
2. ✅ 低效商品定义明确
3. ✅ 避免用户困惑
4. ✅ 修改量适中

**实施步骤**：
1. 定义统一的`is_high_sales()`函数
2. 所有象限使用相同的动销判定标准
3. 明确低效商品定义：低利润 + 低动销
4. 更新操作指南说明

**预期影响**：
- 明星商品数量可能减少5-10%（因为增加了销量门槛）
- 潜力商品数量可能增加5-10%（吸收了一些"高利润+高动销指数但销量少"的商品）
- 低效商品定义更明确

---

## 七、总结

### 当前逻辑的核心问题

1. **动销判定双重标准**：
   - 明星/潜力：只看动销指数
   - 自然引流：动销指数 + 销量门槛 + 订单门槛
   - 导致逻辑不一致

2. **低效商品定义模糊**：
   - 低效商品 = 其他所有情况
   - 包含了一些"高动销但销量少"的边缘商品

3. **用户困惑**：
   - "为什么我的商品动销指数0.65（排名前50%），还被判定为低效？"

### 建议

**立即采用方案1**：统一动销判定标准，明确低效商品定义

**你的意见？**
