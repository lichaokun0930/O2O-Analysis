import{r as u,j as r}from"./framework-DfnVWwpF.js";import{u as b}from"./index-CWtRVkAB.js";import"./utils-CB2_sajW.js";import"./vendor-DUbYPDw3.js";import"./charts-bindingecharts-DvSHEz9I.js";const j=({data:l,theme:n})=>{const a=n==="dark",c=a?"#64748b":"#94a3b8",m=a?"#fff":"#0f172a",d=a?"#94a3b8":"#64748b",f=a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",{categories:h,series:p}=u.useMemo(()=>{const e={},i=l;i.length>0&&i[0].marketingTrend&&i[0].marketingTrend.forEach(t=>{e[t.date]={date:t.date,itemDiscount:0,thresholdDiscount:0,vouchers:0,other:0}}),i.forEach(t=>{t.marketingTrend?.forEach(o=>{e[o.date]&&(e[o.date].itemDiscount+=o.itemDiscount,e[o.date].thresholdDiscount+=o.thresholdDiscount,e[o.date].vouchers+=o.vouchers,e[o.date].other+=o.other)})});const s=Object.keys(e);return{categories:s,series:[{name:"单品直降",data:s.map(t=>e[t].itemDiscount),color:"#f43f5e"},{name:"满减活动",data:s.map(t=>e[t].thresholdDiscount),color:"#f59e0b"},{name:"红包/券",data:s.map(t=>e[t].vouchers),color:"#3b82f6"},{name:"推广/广告",data:s.map(t=>e[t].other),color:"#8b5cf6"}]}},[l]),x={grid:{top:30,right:10,bottom:0,left:10,containLabel:!0},tooltip:{trigger:"axis",backgroundColor:a?"rgba(15, 23, 42, 0.9)":"rgba(255, 255, 255, 0.9)",borderColor:a?"rgba(255, 255, 255, 0.1)":"rgba(0,0,0,0.1)",padding:12,textStyle:{fontFamily:"JetBrains Mono",color:a?"#fff":"#0f172a"},axisPointer:{type:"shadow"}},legend:{data:["单品直降","满减活动","红包/券","推广/广告"],textStyle:{color:c,fontSize:10},bottom:0,itemWidth:10,itemHeight:10},xAxis:{type:"category",data:h,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:c,fontSize:10}},yAxis:{type:"value",splitLine:{lineStyle:{color:f,type:"dashed"}},axisLabel:{color:c,fontSize:10,formatter:e=>`¥${e/1e3}k`}},series:p.map(e=>({name:e.name,type:"bar",stack:"total",data:e.data,itemStyle:{color:e.color},barWidth:"40%"}))},g=b(x,[l,n],n);return r.jsxs("div",{className:"glass-panel rounded-2xl p-6 h-full flex flex-col relative overflow-hidden",children:[r.jsxs("div",{className:"mb-4 relative z-10",children:[r.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",style:{color:m},children:[r.jsx("span",{className:"w-1 h-4 bg-gradient-to-b from-rose-400 to-rose-600 rounded-sm"}),"营销成本趋势"]}),r.jsx("p",{className:"text-xs mt-1 font-mono uppercase tracking-wider opacity-70",style:{color:d},children:"7-DAY COST BREAKDOWN"})]}),r.jsx("div",{className:"flex-1 w-full min-h-[250px]",children:r.jsx("div",{ref:g,className:"w-full h-full"})})]})};export{j as default};
