import{r as o,j as e}from"./framework-DfnVWwpF.js";import{bT as L,cg as M,bE as A,c5 as E}from"./vendor-DUbYPDw3.js";import"./utils-CB2_sajW.js";function j(s,t){const[r,n]=o.useState(s);return o.useEffect(()=>{const a=setTimeout(()=>n(s),t);return()=>clearTimeout(a)},[s,t]),r}const v=({label:s,value:t,onChange:r,min:n,max:a,leftLabel:d,rightLabel:m})=>{const l=(t-n)/(a-n)*100;return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium mb-3 items-end",children:[e.jsx("span",{className:"text-slate-300 font-mono tracking-wide",children:s}),e.jsxs("span",{className:`text-base font-bold font-mono transition-colors duration-300 ${t>0?"text-rose-400":t<0?"text-emerald-400":"text-slate-500"}`,children:[t>0?"+":"",t,"%"]})]}),e.jsxs("div",{className:"relative h-4 w-full flex items-center",children:[e.jsx("div",{className:"absolute w-full h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-600"})}),e.jsx("input",{type:"range",min:n,max:a,step:"5",value:t,onChange:u=>r(parseInt(u.target.value)),className:"absolute w-full h-full opacity-0 cursor-pointer z-20"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 h-1.5 pointer-events-none transition-all duration-500 ease-out z-10 rounded-full opacity-80",style:{left:t>=0?"50%":`${l}%`,width:Math.abs(t)===0?"0%":`${Math.abs(l-50)}%`,backgroundColor:t>0?"#f43f5e":"#34d399"}}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full border-2 border-slate-900 shadow-lg transition-all duration-500 ease-[cubic-bezier(0.25,1,0.5,1)] z-10 pointer-events-none group-hover:scale-125",style:{left:`calc(${l}% - 8px)`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-2 font-mono uppercase",children:[e.jsx("span",{children:d}),e.jsx("span",{children:m})]})]})},O=({data:s})=>{const[t,r]=o.useState(0),[n,a]=o.useState(0),[d,m]=o.useState(!1),l=j(t,200),u=j(n,200),[w,N]=o.useState(s.totalProfit),[c,y]=o.useState(0),b=s.channels.reduce((i,x)=>i+x.costs.marketing,0),f=s.channels.reduce((i,x)=>i+x.costs.delivery,0),p=s.totalProfit;o.useEffect(()=>{const i=1+l/100,x=1+u/100,z=b*i,S=f*x,h=l*.5,D=s.totalRevenue*(1+h/100),P=(s.totalRevenue-p-b-f)*(1+h/100),g=D-P-z-S;N(g),y(g-p)},[l,u,s,b,f,p]);const k=()=>{r(0),a(0)},C=async()=>{m(!0),await new Promise(i=>setTimeout(i,1200)),r(-10),a(-5),m(!1)};return e.jsxs("div",{className:"glass-panel rounded-2xl p-6 relative overflow-hidden flex flex-col justify-between h-full group",children:[e.jsx("div",{className:"absolute inset-0 bg-[size:20px_20px] pointer-events-none opacity-5",style:{backgroundImage:"linear-gradient(currentColor 1px, transparent 1px)"}}),e.jsxs("div",{className:"mb-6 relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-neon-green rounded-full animate-pulse"}),"经营沙盘推演"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1 font-mono uppercase tracking-wider opacity-70",children:"AI SOLVER ENABLED"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:C,disabled:d,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg border text-xs font-bold transition-all ${d?"bg-indigo-500/20 text-indigo-300 border-indigo-500/50":"bg-indigo-600 hover:bg-indigo-500 text-white border-transparent shadow-[0_0_15px_rgba(99,102,241,0.4)]"}`,children:[e.jsx(L,{size:14,className:d?"animate-spin":""}),d?"COMPUTING...":"AI 求解"]}),e.jsx("button",{onClick:k,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-all border border-white/5",children:e.jsx(M,{size:14})})]})]}),e.jsxs("div",{className:"space-y-8 relative z-10 flex-1 flex flex-col justify-center",children:[e.jsx(v,{label:"营销预算投入",value:t,onChange:r,min:-30,max:30,leftLabel:"节流保利",rightLabel:"激进扩张"}),e.jsx(v,{label:"履约成本浮动",value:n,onChange:a,min:-20,max:20,leftLabel:"运力提效",rightLabel:"运力紧张"})]}),e.jsx("div",{className:"mt-auto pt-6 border-t border-white/10 relative z-10",children:e.jsxs("div",{className:`p-5 rounded-xl border backdrop-blur-xl transition-all duration-500 relative overflow-hidden ${c>=0?"bg-emerald-500/10 border-emerald-500/30":"bg-rose-500/10 border-rose-500/30"}`,children:[e.jsxs("div",{className:"flex justify-between items-end mb-2 relative z-10",children:[e.jsx("span",{className:"text-xs text-slate-300 font-bold uppercase font-mono tracking-wider",children:"预计净利润"}),e.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-bold border ${c>=0?"bg-emerald-500/20 text-emerald-300 border-emerald-500/20":"bg-rose-500/20 text-rose-300 border-rose-500/20"}`,children:[c>=0?e.jsx(A,{size:12}):e.jsx(E,{size:12}),e.jsxs("span",{className:"font-mono",children:[c>=0?"+":"","¥",Math.abs(c).toLocaleString(void 0,{maximumFractionDigits:0})]})]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white font-mono flex items-baseline gap-1 relative z-10 tabular-nums",children:[e.jsx("span",{className:"text-lg opacity-40 font-sans",children:"¥"}),w.toLocaleString(void 0,{maximumFractionDigits:0})]})]})})]})};export{O as default};
