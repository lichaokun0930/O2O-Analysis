# 核心文件完整依赖分析

## 🎯 核心系统架构图

```
智能门店看板_Dash版.py (主程序 21910行)
    ├── 【UI组件层】
    │   ├── echarts_factory.py          ✅ 必需 - ECharts图表工厂
    │   ├── component_styles.py         ✅ 必需 - UI样式组件
    │   ├── loading_components.py       ✅ 必需 - 加载动画
    │   └── echarts_responsive_utils.py ✅ 必需 - 响应式适配
    │
    ├── 【数据处理层】
    │   ├── database/                   ✅ 必需 - 数据库模块
    │   │   ├── connection.py
    │   │   ├── models.py
    │   │   ├── data_source_manager.py
    │   │   └── migrations/            ✅ 必需 - 迁移系统
    │   ├── 真实数据处理器.py           ✅ 必需 - 数据预处理
    │   ├── 订单数据处理器.py           ✅ 必需 - 订单逻辑
    │   └── redis相关模块               ✅ 必需 - 缓存系统
    │       ├── redis_config.py
    │       ├── redis_cache_manager.py
    │       └── cache_utils.py
    │
    ├── 【AI智能层】
    │   ├── ai_analyzer.py              ✅ 必需 - AI统一接口
    │   ├── ai_business_context.py      ✅ 必需 - 业务上下文
    │   ├── 商品场景智能打标引擎.py     ✅ 必需 - 场景识别
    │   ├── 场景营销智能决策引擎.py     ✅ 必需 - 营销决策
    │   └── scene_inference.py          ✅ 必需 - 场景推断
    │
    ├── 【高级分析层】
    │   ├── tab5_extended_renders.py    ✅ 必需 - Tab5扩展渲染
    │   ├── 科学八象限分析器.py         ⚠️  被引用 - 八象限分析
    │   └── 评分模型分析器.py           ⚠️  被引用 - 评分模型
    │
    └── 【可选增强层】
        ├── ai_pandasai_integration.py  ⭕ 可选 - PandasAI对话
        ├── ai_rag_knowledge_base.py    ⭕ 已注释 - RAG增强
        ├── 增量学习优化器.py           ⭕ 未引用 - 学习优化
        └── 自适应学习引擎.py           ⭕ 未引用 - 自适应系统
```

---

## ✅ 绝对不能删除的核心文件

### 1. 主程序 (1个)
```
智能门店看板_Dash版.py              # 主看板程序
```

### 2. UI组件 (4个)
```
echarts_factory.py                 # ECharts图表工厂
component_styles.py                # 统一样式组件
loading_components.py              # 加载动画组件
echarts_responsive_utils.py        # 响应式适配工具
```

### 3. 数据处理 (3个)
```
真实数据处理器.py                  # 被看板引用 - 数据预处理
订单数据处理器.py                  # 订单业务逻辑
智能导入门店数据.py                # 数据导入工具
```

### 4. Redis缓存 (3个)
```
redis_config.py                    # Redis配置
redis_cache_manager.py             # 缓存管理器
cache_utils.py                     # 缓存工具函数
```

### 5. AI核心模块 (5个)
```
ai_analyzer.py                     # AI统一接口 (GLM/Gemini)
ai_business_context.py             # 业务上下文和Few-Shot
商品场景智能打标引擎.py             # 场景识别引擎
场景营销智能决策引擎.py             # 营销决策引擎
scene_inference.py                 # 场景推断逻辑
```

### 6. 扩展功能 (3个)
```
tab5_extended_renders.py           # Tab5扩展渲染(被引用)
科学八象限分析器.py                # 被看板引用 - 八象限分析
评分模型分析器.py                  # 被看板引用 - 评分模型
```

### 7. 数据库模块 (完整保留)
```
database/                          # 整个文件夹
  ├── __init__.py
  ├── connection.py                # 数据库连接
  ├── models.py                    # 数据模型
  ├── data_source_manager.py       # 数据源管理
  ├── batch_import.py              # 批量导入
  └── migrations/                  # 迁移系统(完整保留)
      ├── migration_history.py
      ├── apply_migration.py
      ├── sync_migrations.py
      ├── check_structure.py
      └── *.sql
```

### 8. 配置文件 (5个)
```
.env                               # 你的配置(不提交)
.env.example                       # 示例配置
requirements.txt                   # 依赖清单
.gitignore                         # Git忽略规则
README.md                          # 项目说明
```

### 9. 工具脚本 (核心12个)
```
A电脑_智能提交.ps1                 # ⭐ A电脑智能提交
B电脑_拉取代码.ps1                 # ⭐ B电脑智能拉取
B电脑_同步数据库.ps1               # B电脑数据库同步
A电脑_创建迁移.ps1                 # A电脑创建迁移
A电脑_提交迁移.ps1                 # A电脑提交迁移
A电脑_提交所有修改.ps1             # A电脑提交代码

启动看板.ps1                       # 启动看板
启动数据库.ps1                     # 启动PostgreSQL
启动Redis.ps1                      # 启动Redis
setup_new_pc.ps1                   # 新电脑配置
清理Redis缓存.py                   # 清理缓存工具
诊断库存数据.py                    # ✅ 保留 - 数据诊断
```

### 10. 核心文档 (7个)
```
工具包使用总览.md                  # ⭐ 新手入门总览
A电脑_智能提交使用指南.md          # A电脑完整指南
AB电脑操作快速参考.md              # A/B电脑速查表
智能门店看板_Dash版使用指南.md     # 看板使用指南
【权威】业务逻辑与数据字典完整手册.md  # 业务逻辑权威
新电脑完整配置指南.md              # 新电脑配置
数据库同步快速参考.md              # 数据库命令
```

---

## ⚠️ 可以删除但建议保留

### 可选AI模块 (3个)
```
ai_pandasai_integration.py         # PandasAI自然语言查询
ai_rag_knowledge_base.py           # RAG知识库增强(已注释)
```

### 学习系统 (2个)
```
增量学习优化器.py                  # 未被引用 - 自动优化
自适应学习引擎.py                  # 未被引用 - 自适应学习
```

**建议**: 如果磁盘空间充足,保留这些模块备用。

---

## 🗑️ 可以安全删除的文件

### 1. 备份文件夹 (占用最多空间)
```
删除文件备份_20251122_215702/       # 旧备份文件夹
宸插垹闄ゆ枃浠跺浠絖20251118_145452/  # 乱码文件夹
```

### 2. 测试脚本 (已完成开发调试)
```
测试Redis连接.py                    # Redis已稳定运行
测试Redis性能.py                    # 性能已验证
测试导入脚本修复.py                 # 导入已修复
修复remaining_stock字段.py          # 字段已修复
```

### 3. 过时文档 (被新文档替代)
```
导入脚本修复说明.md                 # 功能已完成
导入脚本库存字段修复说明.md         # 功能已完成
字段兼容性修复完成报告.md           # 功能已完成
models字段同步修复说明.md           # 被迁移系统替代
同步数据库结构指南.md               # 被新文档替代
```

### 4. 临时/演示脚本
```
示例_WebWorker后台计算.py           # 演示代码
price_comparison_dashboard.py       # 独立项目(价格对比)
同步数据库结构.py                   # 被迁移系统替代
```

### 5. 旧版Git脚本 (被智能脚本替代)
```
git_pull.ps1                        # 被B电脑_拉取代码.ps1替代
git_push.ps1                        # 被A电脑_智能提交.ps1替代
git_sync.ps1                        # 功能重复
推送到Github.ps1                    # 功能重复
```

### 6. 多余启动脚本
```
清理临时文件-综合版_backup.ps1     # 备份版本
重启看板.ps1                        # 与启动看板.ps1重复
```

### 7. 旧版安装脚本
```
安装demo依赖.ps1                    # 已过时
安装GLM优化依赖.ps1                 # 已整合到requirements.txt
安装Redis_WSL.ps1                   # WSL方案已废弃
```

### 8. 过时配置文件
```
requirements_utf8.txt               # 已合并到requirements.txt
```

---

## 📊 清理效果预估

| 类别 | 预计节省空间 |
|------|-------------|
| 备份文件夹 | 50-100MB |
| 测试脚本 | 2-5MB |
| 过时文档 | 1-2MB |
| 重复脚本 | 0.5-1MB |
| **总计** | **55-110MB** |

---

## 🎯 推荐清理方案

### 最小清理 (只删必要)
```powershell
# 删除备份文件夹 + 测试脚本
# 保留所有可能有用的模块
.\清理项目文件.ps1
# 第一个确认: y
# 第二个确认: n (保留AI模块)
```

### 标准清理 (推荐)
```powershell
# 删除备份、测试、过时文档、重复脚本
# 保留所有AI功能模块
.\清理项目文件.ps1
# 第一个确认: y
# 第二个确认: n
```

### 深度清理 (最小化部署)
```powershell
# 删除所有可选模块
.\清理项目文件.ps1
# 第一个确认: y  
# 第二个确认: y (删除可选AI模块)
```

---

## ⚠️ 重要提醒

### 绝对不能删除:
1. ✅ **真实数据处理器.py** - 被看板主程序直接引用
2. ✅ **科学八象限分析器.py** - 被看板主程序try-import引用
3. ✅ **评分模型分析器.py** - 被看板主程序try-import引用
4. ✅ **诊断库存数据.py** - 重要的数据诊断工具
5. ✅ 所有database/目录内容
6. ✅ 所有redis相关模块

### 可以安全删除:
1. ✅ 备份文件夹(旧版本代码)
2. ✅ 测试脚本(开发调试完成)
3. ✅ 过时文档(被新文档替代)
4. ✅ 重复的Git脚本(被智能脚本替代)

---

## 📌 总结

**核心文件总数**: 约45个文件 + database/完整目录  
**可删除文件**: 约25个文件 + 2个大文件夹  
**节省空间**: 约55-110MB

**建议**: 执行标准清理,保留所有功能模块,只删除明确无用的备份和测试文件。
