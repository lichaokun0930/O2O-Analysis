# 🎉 商品分类结构竞争力分析模块 - 已上线

## 📅 更新时间
2025-10-16

## 🆕 新增功能

### 核心理念
**商品分类结构 = 门店供给能力 → 影响流量、客单价、复购率**

- ✅ **结构深度**：单一品类SKU越多，满足细分需求越好
- ✅ **结构广度**：覆盖品类越多，一站式购物体验越好
- ✅ **结构质量**：高毛利/高频/刚需品类占比越高，盈利能力越强

---

## 📊 功能模块

### Tab1: 品类结构总览
**战略视角，评估门店整体品类布局**

**关键指标**:
- 📊 各品类销售额占比（饼图）
- 📦 各品类SKU数量分布（柱状图）
- 📈 品类集中度（HHI指数）
  - HHI > 0.25: 集中度高，品类结构失衡
  - HHI < 0.15: 分布均衡，结构健康
  - HHI 0.15-0.25: 适中

**业务价值**:
- 识别门店核心品类
- 评估品类多元化程度
- 发现结构性风险（如过度依赖单一品类）

---

### Tab2: 品类深度分析
**运营视角，深入分析单个品类**

**分析维度**:
- 🔍 选择品类查看详情
- 📦 SKU数量、销售额、订单数、毛利率
- 🏆 TOP20热销商品排行
- 📊 三级分类明细（子品类分布）
- 💰 价格分布（识别价格带）

**业务价值**:
- 评估品类深度（SKU丰富度）
- 识别爆品和长尾商品
- 优化品类内部结构

---

### Tab3: 品类贡献度矩阵
**决策支持，品类战略定位**

**四象限矩阵**:
```
高毛利率
    │
    │  💎 高价值品类    │  🌟 明星品类
    │  (潜力培育)      │  (核心竞争力)
────┼────────────────┼──────────────> 高销售额
    │  ⚠️ 优化品类     │  🔥 引流品类
    │  (考虑调整)      │  (保持竞争力)
    │
低毛利率
```

**品类定位**:
- 🌟 **明星品类**: 高销售额 + 高毛利率 → 核心竞争力，重点维护
- 💎 **高价值品类**: 低销售额 + 高毛利率 → 潜力品类，重点培育
- 🔥 **引流品类**: 高销售额 + 低毛利率 → 导流作用，保持竞争力
- ⚠️ **优化品类**: 低销售额 + 低毛利率 → 考虑优化或淘汰

**业务价值**:
- 战略资源分配（采购、陈列、促销）
- 品类组合优化
- 供应商谈判依据

---

### Tab4: 跨品类组合分析
**关联分析，发现跨品类购买偏好**

**分析内容**:
- 🔥 品类组合热度TOP20
- 📊 共同购买频次
- 🎯 关联强度分析

**业务价值**:
- 🛒 **陈列优化**: 关联品类就近摆放
- 📦 **套餐设计**: 跨品类组合促销（如"零食+饮料"）
- 🎯 **交叉推荐**: 买了A品类推荐B品类

**示例**:
```
零食 + 饮料: 共同购买156次
→ 建议: 零食货架旁陈列饮料促销区
→ 套餐: "零食+饮料"组合装¥19.9

日用品 + 清洁用品: 共同购买98次
→ 建议: 将清洁用品与日用品就近陈列
```

---

### Tab5: 完整数据
**数据导出，支持二次分析**

- 📋 一级分类统计表
- 📋 三级分类统计表
- 💾 数据格式化展示
- 📥 支持复制/导出

---

## 📈 智能洞察

系统自动生成的智能洞察包括:

1. **品类数量**: 当前经营品类数量
2. **集中度评估**: HHI指数 + 健康度判断
3. **TOP品类识别**: 销售额占比最高的品类
4. **SKU深度**: 平均每个品类的SKU数量
5. **高毛利品类**: 毛利率超过平均值20%的品类
6. **品类定位分布**: 明星/高价值/引流/优化品类分布

---

## 🎯 使用场景

### 场景1: 品类结构诊断
**问题**: 门店销售增长乏力，不知道问题在哪？

**分析流程**:
1. 查看Tab1品类结构总览 → 识别HHI指数
2. 如果HHI>0.25 → 品类过于集中
3. 查看Tab3贡献度矩阵 → 识别优化品类
4. 建议: 增加高价值品类SKU，淘汰优化品类

---

### 场景2: 品类扩展决策
**问题**: 想增加新品类，但不确定哪个品类有潜力？

**分析流程**:
1. 查看Tab3贡献度矩阵 → 找到高价值品类（低销售+高毛利）
2. 查看Tab2品类深度 → 分析该品类的SKU数量
3. 如果SKU<10 → 增加SKU丰富度
4. 如果SKU>20 → 考虑新增相关品类

---

### 场景3: 陈列优化
**问题**: 门店布局不合理，客户找不到想要的商品？

**分析流程**:
1. 查看Tab4跨品类组合 → 识别高频组合
2. 将高频组合的品类就近陈列
3. 示例: "零食+饮料"高频 → 零食区旁设置饮料促销区

---

### 场景4: 促销活动策划
**问题**: 想做跨品类促销，但不知道哪些品类适合组合？

**分析流程**:
1. 查看Tab4跨品类组合 → 找TOP5组合
2. 查看Tab3贡献度矩阵 → 确认组合中至少有1个明星品类
3. 设计套餐: 明星品类(引流) + 高价值品类(利润)
4. 示例: "零食(引流) + 进口食品(高毛利)" → ¥29.9组合装

---

## 📊 数据要求

### 必需字段
| 字段名 | 说明 | 示例 |
|--------|------|------|
| 订单ID | 订单唯一标识 | ORD001 |
| 商品名称 | 商品名称 | 可口可乐 |
| 商品实售价 | 商品实际售价 | 3.5 |
| **一级分类** | **商品一级分类** | **饮料** |

### 可选字段（增强分析）
| 字段名 | 说明 | 用途 |
|--------|------|------|
| 三级分类 | 商品三级分类 | 更细粒度分析 |
| 商品成本 | 商品成本 | 计算毛利率 |
| 渠道 | 订单渠道 | 渠道分析 |

### 字段检查
如果数据中没有以下字段，模块会提示:
- ❌ 缺少"一级分类" → 无法分析品类结构
- ❌ 缺少"商品成本" → 毛利率显示为0

---

## 🚀 快速启动

### 方法1: 独立运行（测试）
```powershell
streamlit run 商品分类结构分析.py
```

### 方法2: 集成看板（推荐）
```powershell
.\启动多商品分析看板.ps1
```

启动后打开浏览器: http://localhost:8503

---

## 📸 界面预览

### 主界面
```
====================================
🛒 多商品订单引导分析看板
====================================

📊 核心分析模块
┌─────────────────────────────────┐
│ 🛒 多商品订单引导               │
│ 🏪 商品分类结构竞争力 ⭐NEW    │
│ 📈 满减策略优化                 │
└─────────────────────────────────┘
```

### 商品分类分析Tab
```
🏪 商品分类结构竞争力分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎯 智能洞察
- 📊 当前经营 8 个一级品类
- ✅ 品类分布均衡（HHI=0.142），结构健康
- 🏆 TOP品类：零食（销售额¥12,450.00，占比32.1%）
- 📦 平均品类SKU数：15个
- 💰 高毛利品类：进口食品, 个护美妆

━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─────────────────────────────────┐
│ 📊 品类结构总览                 │
│ 🔍 品类深度分析                 │
│ 💎 贡献度矩阵                   │
│ 🔗 跨品类组合                   │
│ 📋 完整数据                     │
└─────────────────────────────────┘
```

---

## 🔧 技术实现

### 核心算法

1. **HHI指数计算**（品类集中度）:
```python
销售占比 = 品类销售额 / 总销售额
HHI = Σ(销售占比²)

解读:
- HHI = 1: 完全垄断（只有1个品类）
- HHI = 0: 完全分散（无限多品类均分）
```

2. **毛利率计算**:
```python
毛利率 = (商品实售价 - 商品成本) / 商品实售价 × 100%
```

3. **跨品类关联分析**（类似购物篮分析）:
```python
按订单分组 → 提取每个订单的品类列表
生成品类对组合 → 统计共同购买频次
排序TOP20 → 识别强关联品类
```

---

## 💡 最佳实践

### 1. 定期诊断（每周）
- ✅ 查看品类结构总览，监控HHI指数
- ✅ 识别销售额/毛利率异常品类
- ✅ 调整采购/陈列策略

### 2. 月度复盘（每月）
- ✅ 对比月度品类定位变化
- ✅ 评估新品类/新SKU效果
- ✅ 优化品类结构

### 3. 季度战略（每季度）
- ✅ 品类扩展/淘汰决策
- ✅ 供应商谈判（基于贡献度矩阵）
- ✅ 陈列改造（基于跨品类组合）

---

## 🤝 与其他模块联动

### 与"多商品订单引导"联动
- **商品组合分析** → 查看具体商品组合
- **品类组合分析** → 查看品类级别组合
- **互补分析**: 品类层面策略 + 商品层面执行

示例:
```
品类分析: "零食+饮料"高频组合
         ↓
商品分析: 具体哪些零食和饮料组合最强？
         ↓
执行策略: 薯片+可乐组合促销
```

---

## 📝 更新日志

### v1.0.0 (2025-10-16)
- ✨ 新增商品分类结构分析模块
- ✨ 5大Tab页全面分析
- ✨ 智能洞察自动生成
- ✨ 四象限战略矩阵
- ✨ 跨品类关联挖掘
- ✨ 与多商品订单引导模块集成

---

## 🎯 下一步规划

### Phase 4: 时间序列分析（规划中）
- 📈 品类销售趋势
- 📊 品类季节性分析
- 🔄 品类生命周期

### Phase 5: 竞对对标（规划中）
- 🏪 与竞对品类结构对比
- 📊 品类缺口分析
- 🎯 差异化策略

---

## ❓ 常见问题

### Q1: 为什么有些品类毛利率显示0？
**A**: 数据中缺少"商品成本"字段。如果有成本数据，请确保字段名为"商品成本"。

### Q2: 为什么看不到三级分类？
**A**: 数据中缺少"三级分类"字段。如果只有一级分类，Tab2会显示简化版分析。

### Q3: HHI指数多少算合理？
**A**: 
- HHI < 0.15: 品类非常均衡，可能过于分散
- HHI 0.15-0.25: 适中，既有核心品类又不过度依赖
- HHI > 0.25: 品类集中，风险较高

### Q4: 如何导出分析结果？
**A**: 在Tab5"完整数据"中，可以复制表格数据到Excel进行二次分析。

---

## 📧 联系支持

如有问题或建议，请联系开发团队。

---

**🎉 开始使用商品分类结构竞争力分析，全面评估门店商品结构！**
