# Tab 4 问题诊断模块 - 功能测试清单

## 📋 测试概览

**测试日期**: 2025-10-17  
**测试版本**: Dash版 v1.0  
**测试范围**: Tab 4.1 ~ 4.6 全部功能  
**浏览器**: http://localhost:8050

---

## ✅ Tab 4.1: 销量下滑诊断

### 基础功能测试

- [ ] **页面加载**
  - [ ] Tab标签显示正常
  - [ ] 参数配置区域显示
  - [ ] 所有卡片正常渲染

- [ ] **参数配置**
  - [ ] 时间粒度下拉框可选择（周/日）
  - [ ] 下滑阈值滑块可拖动（-50% ~ -5%）
  - [ ] 当前期和对比期可选择
  - [ ] "开始诊断"按钮可点击

- [ ] **第一部分：核心指标可视化**
  - [ ] 📊 分时段分布（饼图）
    - [ ] 图表正常显示
    - [ ] 工具栏功能正常（缩放、平移、下载）
    - [ ] 阅读提示卡片显示
  
  - [ ] 🎭 分场景分布（饼图）
    - [ ] 图表正常显示
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示
  
  - [ ] 💰 收入损失TOP10（瀑布图）
    - [ ] 图表正常显示
    - [ ] 瀑布效果正确
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示
  
  - [ ] 📈 周期对比（分组柱状图）
    - [ ] 图表正常显示
    - [ ] 对比数据清晰
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示

- [ ] **第二部分：分类维度分析**
  - [ ] 📊 分类损失排名（横向柱状图）
    - [ ] 图表正常显示
    - [ ] 排序正确
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示
  
  - [ ] 🏆 各分类TOP商品（分面柱状图）
    - [ ] 图表正常显示
    - [ ] 分面布局清晰
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示

- [ ] **第三部分：高级分析（Tabs）**
  - [ ] Tab1: 💎 利润影响（4D气泡图）
    - [ ] 图表正常显示
    - [ ] 气泡大小和颜色正确
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示
  
  - [ ] Tab2: 🎯 分类树状图
    - [ ] 图表正常显示
    - [ ] 层级结构清晰
    - [ ] 交互功能正常（点击钻取）
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示
  
  - [ ] Tab3: 🔥 时段×场景热力图
    - [ ] 热力图正常显示
    - [ ] 颜色映射正确
    - [ ] 工具栏功能正常
    - [ ] 阅读提示卡片显示
    - [ ] 详细数据表格显示
    - [ ] 表格排序/筛选功能正常

- [ ] **数据导出**
  - [ ] Excel导出按钮可点击
  - [ ] 导出文件名包含时间戳
  - [ ] Excel文件包含4个Sheet
  - [ ] 数据完整无误

### 异常情况测试

- [ ] 无数据时显示空数据提示
- [ ] 参数错误时显示错误提示
- [ ] 诊断失败时显示友好错误信息

---

## ✅ Tab 4.2: 客单价归因分析

### 基础功能测试

- [ ] **页面加载**
  - [ ] Tab标签显示正常
  - [ ] 说明卡片可展开/收起
  - [ ] 参数配置区域显示

- [ ] **参数配置**
  - [ ] 分析粒度下拉框（周/日）
  - [ ] 客单价下滑阈值滑块（-30% ~ -1%）
  - [ ] 分析模式单选框（批量/精准）
  - [ ] 精准模式下周期选择器显示
  - [ ] 周期选择器选项正确加载

- [ ] **说明卡片交互**
  - [ ] 点击"展开/收起"按钮正常工作
  - [ ] 说明内容完整显示

- [ ] **分析功能**
  - [ ] 点击"开始归因"按钮
  - [ ] 结果提示显示正确（成功/失败）
  - [ ] 统计信息准确（Sheet数、行数）

- [ ] **数据展示（3个Tabs）**
  - [ ] Tab1: 📊 客单价变化
    - [ ] 数据表格正常显示
    - [ ] 列标题完整
    - [ ] 数据格式正确（百分比、金额）
    - [ ] 排序功能正常
    - [ ] 筛选功能正常
    - [ ] 分页功能正常
  
  - [ ] Tab2: 📉 下滑商品分析
    - [ ] 数据表格正常显示
    - [ ] 说明文字显示
    - [ ] TOP5商品数据正确
    - [ ] 排序/筛选/分页正常
  
  - [ ] Tab3: 📈 上涨商品分析
    - [ ] 数据表格正常显示
    - [ ] 说明文字显示
    - [ ] TOP5商品数据正确
    - [ ] 排序/筛选/分页正常

- [ ] **数据导出**
  - [ ] Excel导出按钮可点击
  - [ ] Excel包含3个Sheet
  - [ ] Sheet名称正确
  - [ ] 数据完整无误
  - [ ] CSV导出按钮可点击
  - [ ] CSV文件中文正常显示
  - [ ] 文件名包含时间戳

### 模式切换测试

- [ ] **批量模式**
  - [ ] 周期选择器隐藏
  - [ ] 分析所有下滑周期
  - [ ] 结果正确

- [ ] **精准模式**
  - [ ] 周期选择器显示
  - [ ] 可选择不同周期
  - [ ] 分析指定两个周期
  - [ ] 结果正确

---

## ✅ Tab 4.3: 负毛利预警

### 基础功能测试

- [ ] **页面加载**
  - [ ] Tab标签显示正常
  - [ ] 说明卡片显示
  - [ ] 立即检测按钮显示

- [ ] **检测功能**
  - [ ] 点击"立即检测"按钮
  - [ ] 结果提示显示
  - [ ] 统计信息正确（商品数、累计亏损）

- [ ] **数据表格**
  - [ ] 负毛利商品清单显示
  - [ ] 包含必要列（商品名、成本、售价、亏损额、问题等级）
  - [ ] 条件格式正确
    - [ ] 🔴 严重：红色高亮
    - [ ] 🟠 警告：橙色高亮
  - [ ] 排序功能正常
  - [ ] 筛选功能正常
  - [ ] 分页功能正常

- [ ] **数据导出**
  - [ ] CSV导出按钮可点击
  - [ ] 文件名包含日期
  - [ ] CSV中文正常显示
  - [ ] 数据完整

### 边界情况测试

- [ ] 无负毛利商品时显示成功提示
- [ ] 检测失败时显示错误提示

---

## ✅ Tab 4.4: 高配送费诊断

### 基础功能测试

- [ ] **页面加载**
  - [ ] Tab标签显示正常
  - [ ] 参数配置区域显示
  - [ ] 正常配送费提示卡片显示

- [ ] **参数配置**
  - [ ] 配送费占比阈值滑块可拖动（10%-50%）
  - [ ] 滑块值实时显示
  - [ ] "开始诊断"按钮可点击

- [ ] **诊断功能**
  - [ ] 点击"开始诊断"按钮
  - [ ] 结果提示显示
  - [ ] 统计信息正确（地址数量）

- [ ] **数据表格**
  - [ ] 高配送费地址清单显示
  - [ ] 包含必要列（地址、配送费、订单金额、占比）
  - [ ] 排序功能正常
  - [ ] 筛选功能正常
  - [ ] 分页功能正常

- [ ] **数据导出**
  - [ ] CSV导出按钮可点击
  - [ ] 文件名包含日期
  - [ ] 数据完整

### 参数测试

- [ ] 不同阈值（10%, 20%, 30%, 40%, 50%）
- [ ] 结果随阈值变化正确

### 边界情况测试

- [ ] 无异常订单时显示成功提示
- [ ] 诊断失败时显示错误提示

---

## ✅ Tab 4.5: 角色失衡诊断

### 基础功能测试

- [ ] **页面加载**
  - [ ] Tab标签显示正常
  - [ ] 说明卡片显示
  - [ ] 开始检测按钮显示

- [ ] **检测功能**
  - [ ] 点击"开始检测"按钮
  - [ ] 结果提示显示
  - [ ] 统计信息正确（场景数量）

- [ ] **数据表格**
  - [ ] 场景角色失衡清单显示
  - [ ] 包含必要列（场景、流量品占比、利润品占比、问题描述）
  - [ ] 排序功能正常
  - [ ] 筛选功能正常
  - [ ] 分页功能正常

- [ ] **数据导出**
  - [ ] CSV导出按钮可点击
  - [ ] 文件名包含日期
  - [ ] 数据完整

### 边界情况测试

- [ ] 角色配比合理时显示成功提示
- [ ] 检测失败时显示错误提示

---

## ✅ Tab 4.6: 异常波动预警

### 基础功能测试

- [ ] **页面加载**
  - [ ] Tab标签显示正常
  - [ ] 参数配置区域显示
  - [ ] 异常类型说明卡片显示

- [ ] **参数配置**
  - [ ] 波动阈值滑块可拖动（30%-100%）
  - [ ] 滑块值实时显示
  - [ ] "开始预警"按钮可点击

- [ ] **预警功能**
  - [ ] 点击"开始预警"按钮
  - [ ] 结果提示显示
  - [ ] 统计信息正确（总数、爆单数、滞销数）

- [ ] **数据表格**
  - [ ] 异常波动商品清单显示
  - [ ] 包含必要列（商品名、异常类型、环比变化、变化幅度）
  - [ ] 条件格式正确
    - [ ] 📈 爆单：绿色高亮
    - [ ] 📉 滞销：红色高亮
  - [ ] 排序功能正常
  - [ ] 筛选功能正常
  - [ ] 分页功能正常

- [ ] **数据导出**
  - [ ] CSV导出按钮可点击
  - [ ] 文件名包含日期
  - [ ] 数据完整

### 参数测试

- [ ] 不同阈值（30%, 50%, 70%, 100%）
- [ ] 结果随阈值变化正确

### 边界情况测试

- [ ] 无异常波动时显示成功提示
- [ ] 预警失败时显示错误提示

---

## 🎨 通用UI测试

### 响应式设计

- [ ] 全屏浏览正常
- [ ] 缩小窗口后布局自适应
- [ ] 移动端尺寸（如果适用）

### 交互体验

- [ ] Tab切换流畅无跳转
- [ ] 按钮点击响应快速
- [ ] 表格滚动流畅
- [ ] 图表缩放平滑

### 样式一致性

- [ ] 所有Tab使用统一的卡片样式
- [ ] 按钮样式一致
- [ ] 表格样式一致
- [ ] 颜色方案统一（Bootstrap色系）

### 文字显示

- [ ] 中文字符显示正常
- [ ] Emoji显示正常（🚨🚚⚖️📊等）
- [ ] 特殊符号显示正常（¥、%等）

---

## 🐛 已知问题记录

### 问题1
**描述**: 
**重现步骤**: 
**预期结果**: 
**实际结果**: 
**优先级**: 高/中/低

### 问题2
**描述**: 
**重现步骤**: 
**预期结果**: 
**实际结果**: 
**优先级**: 高/中/低

---

## ✅ 测试结果总结

### 测试统计

- **总测试项**: 约120项
- **通过数量**: ___
- **失败数量**: ___
- **阻塞问题**: ___
- **通过率**: ___%

### 关键发现

**优点**:
1. 
2. 
3. 

**问题**:
1. 
2. 
3. 

**建议**:
1. 
2. 
3. 

---

## 📝 测试人员签名

**测试人员**: ___________  
**测试日期**: 2025-10-17  
**测试环境**: Windows + PowerShell + Python 3.13  
**浏览器**: Edge/Chrome  

---

## 🚀 后续行动

- [ ] 修复发现的问题
- [ ] 补充遗漏的功能
- [ ] 优化性能
- [ ] 完善文档
- [ ] 准备发布

---

**测试版本**: Dash版 v1.0  
**测试完成度**: ____%  
**建议发布**: 是 / 否

