# 涨价降价判定 - 快速参考卡片

## 📐 核心公式

```
单价变化率 = (当前单价 - 之前单价) / 之前单价 × 100%
```

---

## 🎯 判定标准（默认阈值）

| 判定结果 | 条件 | 示例 |
|---------|------|------|
| 💰 **涨价** | 单价变化率 > **5%** | ¥10 → ¥10.6 (+6%) |
| 💸 **降价** | 单价变化率 < **-5%** | ¥10 → ¥9.4 (-6%) |
| 📊 **价格稳定** | -5% ≤ 变化率 ≤ 5% | ¥10 → ¥10.3 (+3%) |

---

## 🏷️ 完整原因分类

| 原因 | 条件 | emoji |
|-----|------|-------|
| **售罄** | 当前销量=0 且 之前销量>0 | 🔴 |
| **涨价导致销量降** | 涨价(>5%) 且 销量↓ | 💰 |
| **涨价但销量增** | 涨价(>5%) 且 销量↑ | 💰 |
| **降价仍降量** | 降价(<-5%) 且 销量↓ | 💸 |
| **降价促销成功** | 降价(<-5%) 且 销量↑ | 💸 |
| **销量大幅下滑** | 价格稳定 且 销量↓>30% | 📉 |
| **销量小幅下滑** | 价格稳定 且 销量↓<30% | 📉 |
| **正常** | 其他情况 | ✅ |

---

## 💡 典型案例

### 案例1: 涨价导致销量降 💰
```
可口可乐: ¥3.5 → ¥4.0
变化率: +14.3% > 5% ✓ 涨价
销量: 100件 → 80件 (-20件)
判定: 💰涨价导致销量降
```

### 案例2: 降价促销成功 💸
```
薯片: ¥5.0 → ¥4.0
变化率: -20% < -5% ✓ 降价
销量: 80件 → 120件 (+40件)
判定: 💸降价促销成功
```

### 案例3: 价格微调不算涨价 📊
```
矿泉水: ¥2.0 → ¥2.08
变化率: +4% (在-5%~5%内)
判定: 📉销量小幅下滑 (非涨价)
```

---

## ⚙️ 阈值调整建议

| 业务类型 | 建议阈值 | 理由 |
|---------|---------|------|
| 高频快消品 | **±3%** | 价格敏感,需捕捉小变化 |
| **标准零售** ⭐ | **±5%** | 平衡敏感度和稳定性 |
| 高价商品 | **±10%** | 价格稳定,容忍正常波动 |

**修改位置**: `问题诊断引擎.py` 第843-851行

---

## 📊 决策树

```
开始
 ↓
当前销量=0? 
 ├─ 是 → 🔴售罄
 └─ 否 
    ↓
   单价变化率>5%?
    ├─ 是 → 销量↓? 
    │       ├─ 是 → 💰涨价导致销量降
    │       └─ 否 → 💰涨价(销量增)
    └─ 否
       ↓
      单价变化率<-5%?
       ├─ 是 → 销量↓?
       │       ├─ 是 → 💸降价仍降量
       │       └─ 否 → 💸降价促销成功
       └─ 否 (价格稳定)
          ↓
         销量↓>30%?
          ├─ 是 → 📉销量大幅下滑
          └─ 否 → 销量↓?
                  ├─ 是 → 📉销量小幅下滑
                  └─ 否 → ✅正常
```

---

## 🔍 快速自查

**Q: ¥10→¥10.4 算涨价吗?**  
A: 不算。变化率+4%<5%,属于价格稳定。

**Q: ¥10→¥10.6 算涨价吗?**  
A: 算。变化率+6%>5%,判定为涨价。

**Q: 如果业务需要更敏感的判定?**  
A: 调整阈值为±3%,更小的变化也会触发。

**Q: 价格不变但销量大降怎么判?**  
A: 如果销量下降>30%,判定为"销量大幅下滑"。

---

**最后更新**: 2025-10-16  
**默认阈值**: 涨降价±5%, 销量大幅下滑30%
