# 订单数据看板 - 启动说明

## 端口配置

| 服务 | 端口 | 说明 |
|------|------|------|
| 前端开发 | 5173 | Vite 开发服务器（热重载） |
| 前端预览 | 4173 | 生产版本预览服务器 |
| 后端API | 8080 | FastAPI 服务器 |

## 快速启动

### 一键启动（推荐）

双击运行 `一键启动.bat`，按照提示选择：

```
[1] 开发模式 - 前后端都启动热重载
[2] 生产模式 - 构建前端 + 多进程后端
[3] 仅启动后端
[4] 仅启动前端
[5] 清理所有旧进程
[6] 重新检查环境
[0] 退出
```

### 单独启动

- **前端**：双击 `启动前端.bat`
- **后端**：双击 `启动后端.bat`

## 旧进程管理

启动脚本会自动检测端口占用情况：

1. **自动检测**：脚本启动时自动扫描端口 5173、4173、8080
2. **进程信息**：显示占用端口的进程 PID 和名称
3. **交互清理**：询问是否终止旧进程
4. **手动清理**：主菜单选择 `[5] 清理所有旧进程`

## 开发模式 vs 生产模式

### 开发模式
- 前端：Vite 热重载，修改代码自动刷新
- 后端：Uvicorn `--reload`，修改代码自动重启
- 适用于日常开发和调试

### 生产模式
- 前端：构建优化的静态文件，启动预览服务器
- 后端：多进程运行（根据 CPU 核心数自动计算）
- 适用于性能测试和部署验证

## 访问地址

### 开发模式
- 前端：http://localhost:5173
- 后端 API：http://localhost:8080
- API 文档：http://localhost:8080/api/docs

### 生产模式
- 前端：http://localhost:4173
- 后端 API：http://localhost:8080

## 环境依赖

脚本启动时会自动检查：

- ✅ Node.js (推荐 18+)
- ✅ npm
- ✅ Python (推荐 3.10+)
- ✅ pip
- ⚠️ Redis（可选，缓存功能）
- ⚠️ PostgreSQL（可选，数据库）

## 常见问题

### Q: 端口被占用怎么办？
启动脚本会自动检测并提示清理。也可以手动选择菜单 `[5] 清理所有旧进程`。

### Q: 如何修改端口？
编辑对应的 `.bat` 文件，修改顶部的端口配置变量：
```batch
set FRONTEND_DEV_PORT=5173
set FRONTEND_PROD_PORT=4173
set BACKEND_PORT=8080
```

### Q: 依赖安装失败？
- 前端：确保 Node.js 已安装，检查网络连接
- 后端：确保 Python 已安装，检查 pip 配置

### Q: 需要管理员权限？
如果清理进程失败，可能需要以管理员身份运行脚本。

## 文件结构

```
O2O-Analysis/
├── 一键启动.bat      # 主启动脚本（推荐）
├── 启动前端.bat      # 前端独立启动
├── 启动后端.bat      # 后端独立启动
├── 启动说明.md       # 本文档
├── frontend/         # Vue 3 前端
│   ├── .env.development
│   ├── .env.production
│   └── ...
└── backend/          # FastAPI 后端
    ├── requirements.txt
    └── ...
```
